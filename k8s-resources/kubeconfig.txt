openssl genrsa -out steeve.key 2048
openssl req -new -key steeve.key -out steeve.csr -subj "/CN=steeve"
cat steeve.csr | base64 | tr -d "\n" 

---
apiVersion: certificates.k8s.io/v1
kind: CertificateSigningRequest
metadata:
  name: steeve
spec:
  request: <steeve.csr-base64-value>
  signerName: kubernetes.io/kube-apiserver-client
  expirationSeconds: 86400  # one day
  usages:
  - client auth

kubectl apply -f steeve.yml
kubectl certificate approve steeve
kubectl get csr steeve -o jsonpath='{.status.certificate}'| base64 -d > steeve.crt
kubectl create role steeve-role --verb=create --verb=get --verb=list --verb=update --verb=delete --resource=pods --dry-run=client -o yaml > steeve-role.yml 
kubectl create rolebinding steeve-role-binding --role=steeve-role --user=steeve --dry-run=client -o yaml > steeve-role-binding.yml
kubectl config set-credentials steeve --client-key=steeve.key --client-certificate=steeve.crt --embed-certs=true
kubectl config set-context steeve --cluster=kubernetes --user=steeve
